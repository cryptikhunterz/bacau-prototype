---
phase: 04-documentation
plan: 01
type: execute
---

<objective>
Create technical documentation for the pitch control feature.

Purpose: Enable future developers to understand, maintain, and extend the pitch control visualization.
Output: `docs/technical/pitch_control.md` and updated README.md
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./04-01-SUMMARY.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-velocity-module/SUMMARY.md
@.planning/phases/02-pitch-control-module/SUMMARY.md
@src/velocity.py
@src/pitch_control.py

**Prior Phase Deliverables:**
- Phase 1: `src/velocity.py` - calculate_velocities(), smooth_velocities(), clamp_velocities()
- Phase 2: `src/pitch_control.py` - create_pitch_grid(), compute_pitch_control(), time_to_intercept(), player_influence()
- Phase 3: `app.py` - sidebar controls, pitch control overlay in render_frame()

**Algorithm Specification:**
- Model: Spearman 2017 influence-based pitch control
- Constants: REACTION_TIME=0.7s, MAX_SPEED=13.0 m/s, GRID_RESOLUTION=2m
- Grid: 35×54 points covering 105m × 68m pitch
- Velocity: Position deltas with EMA smoothing (alpha=0.3)
- Control values: 0.0=away, 0.5=contested, 1.0=home
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create technical documentation</name>
  <files>docs/technical/pitch_control.md</files>
  <action>
Create comprehensive technical documentation covering:

1. **Overview** - What pitch control visualization shows and why it's useful for tactical analysis

2. **Algorithm** - Spearman 2017 influence model:
   - Time-to-intercept formula: `tti = reaction_time + adjusted_distance / max_speed`
   - Velocity adjustment: `adjusted_distance = distance - (vel_toward_target × reaction_time)`
   - Influence function: `influence = 1 / (1 + exp(tti / sigma))`
   - Control calculation: `control = home_influence / (home_influence + away_influence)`

3. **Constants** - Document all constants with rationale:
   - REACTION_TIME (0.7s) - Human reaction delay
   - MAX_SPEED (13.0 m/s) - Elite athlete max sprint speed
   - GRID_RESOLUTION (2m) - Balance between accuracy and performance
   - EMA_ALPHA (0.3) - Velocity smoothing responsiveness

4. **Module API** - Function signatures and usage:
   - velocity.py: calculate_velocities, smooth_velocities, clamp_velocities
   - pitch_control.py: create_pitch_grid, time_to_intercept, player_influence, compute_pitch_control

5. **UI Controls** - How to use in the app:
   - "Show pitch control" checkbox
   - "Pitch control opacity" slider

6. **Color interpretation**:
   - Blue: Home team control
   - White: Contested/neutral
   - Red: Away team control

Create docs/technical/ directory if it doesn't exist.
  </action>
  <verify>File exists at docs/technical/pitch_control.md with all sections present</verify>
  <done>Technical documentation complete with algorithm, API, and usage sections</done>
</task>

<task type="auto">
  <name>Task 2: Update README with new feature</name>
  <files>README.md</files>
  <action>
Add a "Pitch Control Visualization" section to README.md:

1. **Feature description** - Brief explanation of what pitch control shows
2. **How to use** - Enable via "Show pitch control" checkbox in sidebar
3. **Screenshot placeholder** - Reference to existing `tests/pitch_control_output.png` or note where screenshot should be
4. **Link to technical docs** - Point to `docs/technical/pitch_control.md` for algorithm details

Insert the section in the appropriate place (after existing features, before installation/setup sections if present).

If README.md doesn't exist, create a basic one with project description and the new feature section.
  </action>
  <verify>README.md contains "Pitch Control" section with usage instructions</verify>
  <done>README updated with pitch control feature documentation</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] `docs/technical/pitch_control.md` exists and contains all required sections
- [ ] README.md contains pitch control feature section
- [ ] Documentation accurately reflects implemented algorithm
- [ ] No broken links or references
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- Technical documentation covers algorithm, API, and usage
- README updated with feature overview
- Milestone 1 complete (all 4 phases done)
</success_criteria>

<output>
After completion, create `.planning/phases/04-documentation/04-01-SUMMARY.md`:

# Phase 4 Plan 1: Documentation Summary

**[One-liner: what shipped]**

## Accomplishments

- [Key outcome 1]
- [Key outcome 2]

## Files Created/Modified

- `docs/technical/pitch_control.md` - Description
- `README.md` - Description

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Milestone Status

Milestone 1 complete. Pitch control feature fully implemented and documented.
</output>
